<!DOCTYPE html>
<meta charset="utf-8">
<body>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <!-- I recommend you host this file on your own, since this will change without warning -->
    <script src="http://datamaps.github.io/scripts/datamaps.world.min.js?v=1"></script>
    <h2>Flight booking sim?????</h2>
    <div id="container1" style="position: relative; width: 80%; max-height: 450px;"></div>
    <script>
    const start = JSON.parse('{ "name": "Edinburgh", "longitude": -3.1883, "latitude": 55.9533}')
    const cities = JSON.parse(`[ 
        { "name": "Prague", "longitude": 14.4378, "latitude": 50.0755},
        { "name": "Dakar", "longitude": -17.4677, "latitude": 14.7167}
    ]`);
    
    //basic map config with custom fills, mercator projection
    var map = new Datamap({
        scope: 'world',
        geographyConfig: {
            popupOnHover: false,
            highlightOnHover: false
        },
        element: document.getElementById('container1'),
        projection: 'mercator',
        height: 500,
        fills: {
          defaultFill: '#f0af0a',
          lt50: 'rgba(0,244,244,0.9)',
          gt50: 'red'
        },
        
        data: {
          GBR: {fillKey: 'gt50' }
        }
    })
      
    // generate arcs and bubbles between stars and destinations
    arcs = [];
    cities.forEach(function(item) {
        arcs.push({origin: start, destination: item})
    })
    map.arc(arcs, {strokeWidth: 3});

    bubbles = [{...start, radius: 10, fillKey: 'lt50'}]
    cities.forEach(function(item) {
        bubbles.push({...item, radius: 10, fillKey: 'gt50'})
    })
      
    map.bubbles(bubbles, {
        popupTemplate: function(geo, data) {
            return "<div class='hoverinfo'>This is " + data.name + ", it costs $$$ to get there</div>";
        }
    });
    </script>
</body>